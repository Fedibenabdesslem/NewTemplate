<div class="dashboard-container">
  <aside class="sidebar">
    <h2>ğŸ‘¨â€âœˆï¸ Mon Espace Conducteur</h2>
    <ul>
      <li [class.active]="section === 'trajets'" (click)="section = 'trajets'">ğŸ“… Mes trajets</li>
      <li [class.active]="section === 'proposer'" (click)="section = 'proposer'">â• Proposer un trajet</li>
      <li [class.active]="section === 'stats'" (click)="section = 'stats'">ğŸ“Š Statistiques</li>
    </ul>
    

  </aside>

  <main class="main-content">
    <ng-container [ngSwitch]="section">
      
      <!-- ğŸš— MES TRAJETS -->
      <section *ngSwitchCase="'trajets'">
        <h3>ğŸ“… Mes trajets</h3>
        <div *ngIf="trajets.length; else noTrajets">
          <div *ngFor="let trajet of trajets" class="trajet-card">
            <div>
              <p><strong>DÃ©part :</strong> {{ trajet.startLocation }}</p>
              <p><strong>ArrivÃ©e :</strong> {{ trajet.endLocation }}</p>
              <p><strong>Date :</strong> {{ trajet.departureTime | date:'short' }}</p>
              <p><strong>Places :</strong> {{ trajet.availableSeats }}</p>
            </div>
            <div class="actions">
              <button [routerLink]="['/edit-trajet', trajet.id]" class="btn edit">âœï¸ Modifier</button>
              <button *ngIf="trajet.id" (click)="supprimerTrajet(trajet.id)" class="btn delete">ğŸ—‘ï¸ Supprimer</button>
            </div>
          </div>
        </div>
        <ng-template #noTrajets><p>Aucun trajet trouvÃ©.</p></ng-template>
      </section>

      <!-- â• PROPOSER UN TRAJET -->
      <section *ngSwitchCase="'proposer'">
        <h3>â• Proposer un trajet</h3>
        <app-proposer-trajet (trajetCree)="rafraichirTrajets()"></app-proposer-trajet>
      </section>

      <!-- ğŸ“Š STATISTIQUES -->
      <section *ngSwitchCase="'stats'" class="stats-section">
        <h3>ğŸ“Š Statistiques</h3>

        <!-- Graphique des top trajets -->
        <div class="chart-container" *ngIf="barChartData?.datasets?.length">
          <canvas baseChart
            [data]="barChartData"
            [options]="barChartOptions"
            [type]="'bar'">
          </canvas>
        </div>

        <!-- RÃ©sumÃ© des statistiques -->
        <div class="stats-summary">
          <h4>ğŸš— Top trajets</h4>
          <ul *ngIf="topTrajets.length; else noTop">
            <li *ngFor="let trajet of topTrajets">
              {{ trajet.startLocation }} â†’ {{ trajet.endLocation }}
              ({{ trajet.departureTime | date:'shortDate' }})
              - {{ trajet.availableSeats }} places
            </li>
          </ul>
          <ng-template #noTop><p>Aucun top trajet.</p></ng-template>

          <h4>ğŸ“ Trajets passÃ©s</h4>
          <ul *ngIf="trajetsPasses.length; else noPast">
            <li *ngFor="let trajet of trajetsPasses">
              {{ trajet.startLocation }} â†’ {{ trajet.endLocation }}
              ({{ trajet.departureTime | date:'shortDate' }})
            </li>
          </ul>
          <ng-template #noPast><p>Aucun trajet passÃ©.</p></ng-template>
        </div>
      </section>
    </ng-container>
  </main>
</div>
