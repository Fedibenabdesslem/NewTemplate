<div class="trajet-container" data-aos="fade-in">
  <div class="search-section">
    <h1>Trouvez votre trajet idéal</h1>
    
    <div class="search-bar">
      <select [(ngModel)]="searchParams.depart" class="search-input">
        <option value="">Départ</option>
        <option *ngFor="let ville of villesTunisiennes">{{ ville }}</option>
      </select>
      
      <select [(ngModel)]="searchParams.arrivee" class="search-input">
        <option value="">Arrivée</option>
        <option *ngFor="let ville of villesTunisiennes">{{ ville }}</option>
      </select>
      
      <input type="date" [(ngModel)]="searchParams.date" class="search-input">
      
      <button class="search-button">
        <i class="fas fa-search"></i> Rechercher
      </button>
    </div>
  </div>

  <div class="trajets-list">
    <div *ngFor="let trajet of trajets" 
         class="trajet-card" 
         [attr.data-id]="trajet.id"
         data-aos="fade-up"
         [attr.data-aos-delay]="50 * trajet.id">
      
      <div class="trajet-header">
        <div class="route">
          <h2>{{ trajet.depart }} → {{ trajet.arrivee }}</h2>
          <div class="popularity-badge" 
               [style.background]="getPopulariteColor(trajet.popularite)">
            {{ trajet.popularite }}% populaire
          </div>
        </div>
        <span class="price">{{ trajet.prix }} TND</span>
      </div>
      
      <div class="trajet-details">
        <div class="detail">
          <i class="fas fa-calendar-day"></i>
          <span>{{ trajet.date | date:'fullDate':'':'fr' }} à {{ trajet.heure }}</span>
        </div>
        
        <div class="detail">
          <i class="fas fa-car"></i>
          <span>{{ trajet.conducteur.vehicule }}</span>
        </div>
        
        <div class="detail">
          <i class="fas fa-user-friends"></i>
          <span>{{ trajet.places }} place(s) disponible(s)</span>
        </div>
        
        <div class="conforts">
          <div *ngFor="let confort of trajet.conducteur.conforts" class="confort-badge">
            <i class="fas" 
               [class.fa-snowflake]="confort === 'climatisation'"
               [class.fa-wifi]="confort === 'wifi'"
               [class.fa-suitcase]="confort === 'bagages'"
               [class.fa-paw]="confort === 'animaux'"></i>
            {{ confort }}
          </div>
        </div>
      </div>
      
      <div class="driver-info">
        <img [src]="trajet.conducteur.avatar" alt="Conducteur" class="driver-avatar">
        <div class="driver-details">
          <span class="driver-name">{{ trajet.conducteur.nom }}</span>
          <div class="rating">
            <div class="stars">
              <i *ngFor="let star of [1,2,3,4,5]" 
                 class="fas" 
                 [class.fa-star]="star <= trajet.conducteur.note"
                 [class.fa-star-half-alt]="star > trajet.conducteur.note && star-0.5 <= trajet.conducteur.note"
                 [class.far]="star > trajet.conducteur.note && star-0.5 > trajet.conducteur.note"></i>
            </div>
            <span class="note">{{ trajet.conducteur.note }}/5</span>
          </div>
        </div>
      </div>
      
      <button class="reserve-button" (click)="reserverTrajet(trajet.id)" routerLink="/payment">
        <i class="fas fa-ticket-alt"></i> Réserver
      </button>
    </div>
  </div>
</div>